<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard ‚Äì Global Epicure</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Jost:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root { --red: #C0392B; --red-light: #E74C3C; --black: #0a0a0a; --white: #f5f5f0; --glass: rgba(255,255,255,0.06); --glass-border: rgba(255,255,255,0.12); --input-bg: rgba(255,255,255,0.05); --sidebar-w: 220px; }
    html, body { height: 100%; font-family: 'Jost', sans-serif; background: var(--black); color: var(--white); overflow-x: hidden; }
    .app { display: flex; min-height: 100vh; }
    .sidebar { width: var(--sidebar-w); flex-shrink: 0; background: rgba(8,8,8,0.98); border-right: 1px solid var(--glass-border); display: flex; flex-direction: column; position: fixed; top: 0; left: 0; bottom: 0; z-index: 50; transition: transform 0.3s; }
    .sidebar-logo { padding: 22px 18px; border-bottom: 1px solid var(--glass-border); display: flex; align-items: center; gap: 10px; }
    .sidebar-logo-name { font-family: 'Playfair Display', serif; font-size: 1rem; }
    .sidebar-logo-tag { font-size: 0.52rem; color: var(--red-light); letter-spacing: 0.1em; text-transform: uppercase; margin-top: 2px; }
    .nav-menu { flex: 1; padding: 16px 0; }
    .nav-item { display: flex; align-items: center; gap: 12px; padding: 13px 22px; cursor: pointer; color: rgba(245,245,240,0.5); font-size: 0.82rem; letter-spacing: 0.05em; transition: all 0.2s; border-left: 3px solid transparent; text-transform: uppercase; }
    .nav-item:hover { color: var(--white); background: var(--glass); }
    .nav-item.active { color: var(--white); border-left-color: var(--red); background: rgba(192,57,43,0.1); }
    .nav-icon { font-size: 1rem; width: 20px; text-align: center; }
    .sidebar-footer { padding: 16px; border-top: 1px solid var(--glass-border); }
    .user-chip { display: flex; align-items: center; gap: 10px; padding: 10px; background: var(--glass); border: 1px solid var(--glass-border); border-radius: 6px; }
    .user-avatar { width: 32px; height: 32px; border-radius: 50%; background: var(--red); display: flex; align-items: center; justify-content: center; font-size: 0.72rem; font-weight: 600; flex-shrink: 0; }
    .user-name { font-size: 0.76rem; font-weight: 500; }
    .user-id { font-size: 0.6rem; color: rgba(245,245,240,0.4); }
    .main { margin-left: var(--sidebar-w); flex: 1; display: flex; flex-direction: column; }
    .topbar { padding: 14px 28px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid var(--glass-border); background: rgba(10,10,10,0.85); backdrop-filter: blur(12px); position: sticky; top: 0; z-index: 40; }
    .topbar-title { font-family: 'Playfair Display', serif; font-size: 1.05rem; }
    .topbar-right { display: flex; align-items: center; gap: 12px; }
    .icon-btn { width: 36px; height: 36px; border-radius: 50%; background: var(--glass); border: 1px solid var(--glass-border); display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 1rem; position: relative; transition: background 0.2s; }
    .icon-btn:hover { background: rgba(255,255,255,0.12); }
    .notif-dot { position: absolute; top: 6px; right: 6px; width: 7px; height: 7px; background: var(--red); border-radius: 50%; }
    .dots-wrap { position: relative; }
    .dots-btn { width: 36px; height: 36px; border-radius: 50%; background: var(--glass); border: 1px solid var(--glass-border); display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 1.4rem; font-weight: 900; color: var(--white); transition: background 0.2s; }
    .dots-btn:hover { background: rgba(255,255,255,0.12); }
    .dots-dropdown { position: absolute; top: 44px; right: 0; background: #111; border: 1px solid var(--glass-border); border-radius: 8px; min-width: 200px; box-shadow: 0 20px 60px rgba(0,0,0,0.7); display: none; z-index: 200; overflow: hidden; }
    .dots-dropdown.open { display: block; }
    .dots-item { padding: 11px 16px; font-size: 0.8rem; color: rgba(245,245,240,0.7); cursor: pointer; display: flex; align-items: center; gap: 10px; transition: all 0.15s; border-bottom: 1px solid rgba(255,255,255,0.04); }
    .dots-item:last-child { border-bottom: none; }
    .dots-item:hover { background: var(--glass); color: var(--white); }
    .dots-item.danger { color: var(--red-light); }
    .dots-item.danger:hover { background: rgba(192,57,43,0.1); }
    .page-content { padding: 28px; flex: 1; }
    .page { display: none; }
    .page.active { display: block; }
    .section-header { margin-bottom: 24px; }
    .section-eyebrow { font-size: 0.62rem; letter-spacing: 0.2em; text-transform: uppercase; color: var(--red-light); margin-bottom: 5px; }
    .section-title { font-family: 'Playfair Display', serif; font-size: 1.6rem; }
    .welcome-banner { background: linear-gradient(135deg, rgba(192,57,43,0.22), rgba(10,10,10,0.9)); border: 1px solid rgba(192,57,43,0.28); border-radius: 12px; padding: 36px; margin-bottom: 28px; position: relative; overflow: hidden; }
    .welcome-banner::before { content: 'üåç'; position: absolute; right: 36px; top: 50%; transform: translateY(-50%); font-size: 5rem; opacity: 0.12; }
    .welcome-banner h1 { font-family: 'Playfair Display', serif; font-size: clamp(1.2rem, 3vw, 1.9rem); margin-bottom: 10px; }
    .welcome-banner p { color: rgba(245,245,240,0.55); font-size: 0.85rem; font-weight: 300; max-width: 480px; line-height: 1.7; }
    .stats-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 14px; }
    .stat-card { background: var(--glass); border: 1px solid var(--glass-border); border-radius: 8px; padding: 18px; }
    .stat-label { font-size: 0.63rem; letter-spacing: 0.12em; text-transform: uppercase; color: rgba(245,245,240,0.35); margin-bottom: 8px; }
    .stat-value { font-family: 'Playfair Display', serif; font-size: 1.5rem; }
    .green { color: #2ecc71; } .gold { color: #e5a000; } .red-val { color: var(--red-light); } .dim { color: rgba(245,245,240,0.5); }
    .round-info { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
    .round-badge { padding: 5px 14px; border-radius: 20px; font-size: 0.68rem; letter-spacing: 0.08em; text-transform: uppercase; border: 1px solid var(--glass-border); background: var(--glass); color: rgba(245,245,240,0.5); }
    .round-badge.active-round { background: rgba(192,57,43,0.15); border-color: var(--red); color: var(--red-light); }
    .progress-bar-wrap { margin-bottom: 22px; }
    .progress-label { display: flex; justify-content: space-between; font-size: 0.68rem; color: rgba(245,245,240,0.35); margin-bottom: 6px; letter-spacing: 0.08em; text-transform: uppercase; }
    .progress-bar { height: 3px; background: rgba(255,255,255,0.08); border-radius: 2px; overflow: hidden; }
    .progress-fill { height: 100%; background: linear-gradient(to right, var(--red), var(--red-light)); border-radius: 2px; transition: width 0.4s; }
    .unlock-msg { background: rgba(192,57,43,0.1); border: 1px solid rgba(192,57,43,0.3); border-radius: 8px; padding: 14px 18px; margin-bottom: 18px; font-size: 0.8rem; color: rgba(245,245,240,0.7); display: none; }
    .unlock-msg strong { color: var(--red-light); }
    .dish-viewer { max-width: 480px; background: var(--glass); border: 1px solid var(--glass-border); border-radius: 12px; overflow: hidden; }
    .dish-img-wrap { position: relative; height: 260px; overflow: hidden; }
    .dish-img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s; }
    .dish-viewer:hover .dish-img { transform: scale(1.05); }
    .dish-num-badge { position: absolute; top: 14px; left: 14px; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); border: 1px solid var(--glass-border); padding: 4px 12px; border-radius: 20px; font-size: 0.68rem; letter-spacing: 0.08em; text-transform: uppercase; }
    .special-badge { position: absolute; top: 14px; right: 14px; background: linear-gradient(135deg, #e5a000, #c0392b); padding: 4px 12px; border-radius: 20px; font-size: 0.68rem; font-weight: 600; display: none; }
    .dish-body { padding: 22px; }
    .dish-country { font-size: 0.65rem; letter-spacing: 0.14em; text-transform: uppercase; color: var(--red-light); margin-bottom: 5px; }
    .dish-name { font-family: 'Playfair Display', serif; font-size: 1.5rem; margin-bottom: 5px; }
    .dish-reviews { font-size: 0.72rem; color: rgba(245,245,240,0.35); margin-bottom: 18px; }
    .star-rating { display: flex; gap: 8px; margin-bottom: 16px; justify-content: center; }
    .star { font-size: 2rem; cursor: pointer; color: rgba(255,255,255,0.15); transition: all 0.15s; }
    .star:hover, .star.active { color: #e5a000; transform: scale(1.2); }
    .dish-earn { text-align: center; font-size: 0.78rem; color: rgba(245,245,240,0.45); margin-bottom: 18px; }
    .dish-earn span { color: #2ecc71; font-weight: 600; }
    .dish-actions { display: flex; gap: 10px; }
    .btn-rate { flex: 1; padding: 12px; background: var(--red); color: var(--white); border: none; border-radius: 6px; font-family: 'Jost', sans-serif; font-size: 0.82rem; letter-spacing: 0.08em; text-transform: uppercase; cursor: pointer; transition: background 0.2s; }
    .btn-rate:hover { background: var(--red-light); }
    .btn-rate:disabled { background: rgba(192,57,43,0.25); cursor: not-allowed; }
    .btn-next { flex: 1; padding: 12px; background: var(--glass); color: var(--white); border: 1px solid var(--glass-border); border-radius: 6px; font-family: 'Jost', sans-serif; font-size: 0.82rem; letter-spacing: 0.08em; text-transform: uppercase; cursor: pointer; transition: all 0.2s; }
    .btn-next:hover { background: rgba(255,255,255,0.1); }
    .depleted-msg { text-align: center; padding: 60px 20px; display: none; }
    .depleted-msg h3 { font-family: 'Playfair Display', serif; font-size: 1.4rem; margin-bottom: 10px; color: var(--red-light); }
    .depleted-msg p { color: rgba(245,245,240,0.45); font-size: 0.83rem; }
    .wallet-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 2px; background: rgba(255,255,255,0.07); border-radius: 10px; overflow: hidden; border: 1px solid var(--glass-border); margin-bottom: 24px; }
    .wallet-cell { background: #0d0d0d; padding: 20px 14px; text-align: center; }
    .wallet-cell-label { font-size: 0.6rem; letter-spacing: 0.1em; text-transform: uppercase; color: rgba(245,245,240,0.3); margin-bottom: 8px; }
    .wallet-cell-value { font-family: 'Playfair Display', serif; font-size: 1.25rem; }
    .wallet-btns { display: flex; gap: 14px; }
    .btn-wallet { flex: 1; padding: 13px; border-radius: 6px; font-family: 'Jost', sans-serif; font-size: 0.83rem; letter-spacing: 0.1em; text-transform: uppercase; cursor: pointer; transition: all 0.2s; border: none; }
    .btn-deposit { background: var(--red); color: var(--white); }
    .btn-deposit:hover { background: var(--red-light); }
    .btn-withdraw { background: var(--glass); color: var(--white); border: 1px solid var(--glass-border) !important; }
    .btn-withdraw:hover { background: rgba(255,255,255,0.1); }
    .incentives-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 18px; }
    .incentive-card { background: var(--glass); border: 1px solid var(--glass-border); border-radius: 12px; overflow: hidden; cursor: pointer; transition: all 0.3s; position: relative; min-height: 180px; display: flex; flex-direction: column; justify-content: flex-end; }
    .incentive-card::before { content: ''; position: absolute; inset: 0; background-size: cover; background-position: center; filter: brightness(0.3); transition: filter 0.3s; }
    .incentive-card:hover::before { filter: brightness(0.45); }
    .incentive-card:hover { transform: translateY(-4px); border-color: var(--red); }
    .ic-1::before { background-image: url('https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&q=50'); }
    .ic-2::before { background-image: url('https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=400&q=50'); }
    .ic-3::before { background-image: url('https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=400&q=50'); }
    .incentive-content { position: relative; z-index: 1; padding: 22px; }
    .incentive-icon { font-size: 1.8rem; margin-bottom: 8px; }
    .incentive-title { font-family: 'Playfair Display', serif; font-size: 1.2rem; margin-bottom: 5px; }
    .incentive-desc { font-size: 0.73rem; color: rgba(245,245,240,0.55); }
    .modal-overlay { display: none; position: fixed; inset: 0; z-index: 300; background: rgba(0,0,0,0.82); backdrop-filter: blur(8px); align-items: center; justify-content: center; padding: 20px; }
    .modal-overlay.open { display: flex; }
    .modal { background: #111; border: 1px solid var(--glass-border); border-radius: 12px; padding: 32px 28px; width: 100%; max-width: 460px; position: relative; max-height: 88vh; overflow-y: auto; }
    .modal-close { position: absolute; top: 14px; right: 16px; background: none; border: none; color: rgba(255,255,255,0.35); font-size: 1.2rem; cursor: pointer; }
    .modal-close:hover { color: var(--white); }
    .modal h3 { font-family: 'Playfair Display', serif; font-size: 1.4rem; margin-bottom: 6px; }
    .modal-sub { font-size: 0.78rem; color: rgba(245,245,240,0.4); margin-bottom: 22px; }
    .payment-methods { display: flex; flex-direction: column; gap: 10px; }
    .pay-method { padding: 13px 16px; background: var(--glass); border: 1px solid var(--glass-border); border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 12px; font-size: 0.83rem; transition: all 0.2s; }
    .pay-method:hover { background: rgba(192,57,43,0.1); border-color: var(--red); }
    .pay-icon { font-size: 1.1rem; width: 22px; }
    .amount-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 14px; }
    .amount-btn { padding: 13px; background: var(--glass); border: 1px solid var(--glass-border); border-radius: 6px; color: var(--white); font-family: 'Jost', sans-serif; font-size: 0.88rem; cursor: pointer; transition: all 0.2s; text-align: center; }
    .amount-btn:hover, .amount-btn.selected { background: rgba(192,57,43,0.2); border-color: var(--red); color: var(--red-light); }
    .manual-input { width: 100%; padding: 11px 14px; background: var(--input-bg); border: 1px solid var(--glass-border); color: var(--white); border-radius: 6px; font-family: 'Jost', sans-serif; font-size: 0.88rem; margin-bottom: 14px; }
    .manual-input:focus { outline: none; border-color: var(--red); }
    .manual-input::placeholder { color: rgba(245,245,240,0.2); }
    .btn-confirm { width: 100%; padding: 12px; background: var(--red); color: var(--white); border: none; border-radius: 6px; font-family: 'Jost', sans-serif; font-size: 0.83rem; letter-spacing: 0.1em; text-transform: uppercase; cursor: pointer; transition: background 0.2s; }
    .btn-confirm:hover { background: var(--red-light); }
    .success-msg { color: #2ecc71; font-size: 0.8rem; margin-top: 12px; display: none; padding: 12px; background: rgba(46,204,113,0.08); border: 1px solid rgba(46,204,113,0.18); border-radius: 6px; line-height: 1.5; }
    .bonus-table { width: 100%; border-collapse: collapse; }
    .bonus-table th { font-size: 0.62rem; letter-spacing: 0.1em; text-transform: uppercase; color: rgba(245,245,240,0.35); padding: 8px 10px; text-align: left; border-bottom: 1px solid var(--glass-border); }
    .bonus-table td { padding: 12px 10px; font-size: 0.82rem; border-bottom: 1px solid rgba(255,255,255,0.04); }
    .bonus-table tr:last-child td { border-bottom: none; }
    .bonus-amount { color: #2ecc71; font-weight: 600; }
    .text-content h4 { font-family: 'Playfair Display', serif; font-size: 0.95rem; margin: 16px 0 7px; color: var(--red-light); }
    .text-content p { font-size: 0.8rem; color: rgba(245,245,240,0.6); line-height: 1.8; margin-bottom: 8px; }
    .text-content ul { padding-left: 16px; }
    .text-content li { font-size: 0.8rem; color: rgba(245,245,240,0.6); line-height: 1.8; }
    .profile-avatar-lg { width: 66px; height: 66px; border-radius: 50%; background: var(--red); display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: 600; margin: 0 auto 18px; }
    .profile-info { text-align: center; margin-bottom: 22px; }
    .profile-name { font-family: 'Playfair Display', serif; font-size: 1.25rem; margin-bottom: 4px; }
    .profile-email { font-size: 0.78rem; color: rgba(245,245,240,0.4); margin-bottom: 10px; }
    .profile-id-badge { display: inline-block; padding: 4px 14px; background: rgba(192,57,43,0.1); border: 1px solid rgba(192,57,43,0.3); border-radius: 20px; font-size: 0.7rem; letter-spacing: 0.1em; color: var(--red-light); }
    .referral-box { background: var(--glass); border: 1px solid var(--glass-border); border-radius: 8px; padding: 16px; margin-top: 14px; }
    .referral-label { font-size: 0.63rem; letter-spacing: 0.12em; text-transform: uppercase; color: rgba(245,245,240,0.35); margin-bottom: 6px; }
    .referral-id { font-size: 0.92rem; font-weight: 500; color: #e5a000; }
    .notif-item { padding: 12px 0; border-bottom: 1px solid rgba(255,255,255,0.05); display: flex; gap: 10px; align-items: flex-start; }
    .notif-item:last-child { border-bottom: none; }
    .notif-dot-sm { width: 7px; height: 7px; background: var(--red); border-radius: 50%; margin-top: 5px; flex-shrink: 0; }
    .notif-text { font-size: 0.8rem; color: rgba(245,245,240,0.65); line-height: 1.5; }
    .notif-time { font-size: 0.65rem; color: rgba(245,245,240,0.28); margin-top: 3px; }
    .settings-label { font-size: 0.63rem; letter-spacing: 0.12em; text-transform: uppercase; color: rgba(245,245,240,0.35); margin-bottom: 10px; }
    .theme-btns { display: flex; gap: 10px; }
    .theme-btn { flex: 1; padding: 10px; border-radius: 6px; border: 1px solid var(--glass-border); background: var(--glass); color: rgba(245,245,240,0.55); font-family: 'Jost', sans-serif; font-size: 0.78rem; cursor: pointer; transition: all 0.2s; text-align: center; }
    .theme-btn.active, .theme-btn:hover { background: rgba(192,57,43,0.15); border-color: var(--red); color: var(--white); }
    .lang-select { width: 100%; padding: 11px 14px; background: var(--input-bg); border: 1px solid var(--glass-border); color: var(--white); border-radius: 6px; font-family: 'Jost', sans-serif; font-size: 0.83rem; appearance: none; cursor: pointer; }
    .lang-select option { background: #1a1a1a; }
    .mobile-menu-btn { display: none; background: none; border: none; color: var(--white); font-size: 1.3rem; cursor: pointer; }
    @media(max-width: 768px) { .sidebar { transform: translateX(-100%); } .sidebar.open { transform: translateX(0); } .main { margin-left: 0; } .mobile-menu-btn { display: block; } .page-content { padding: 18px 14px; } .topbar { padding: 12px 14px; } .wallet-grid { grid-template-columns: repeat(2, 1fr); } .incentives-grid { grid-template-columns: 1fr; } .stats-grid { grid-template-columns: repeat(2, 1fr); } }
  </style>
<body>
<div class="app">
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-logo">
      <svg width="26" height="26" viewBox="0 0 42 42" fill="none">
        <circle cx="21" cy="21" r="19" stroke="#C0392B" stroke-width="1.5"/>
        <line x1="15" y1="11" x2="15" y2="31" stroke="white" stroke-width="1.3" stroke-linecap="round"/>
        <line x1="13" y1="11" x2="13" y2="17" stroke="white" stroke-width="1.3" stroke-linecap="round"/>
        <line x1="17" y1="11" x2="17" y2="17" stroke="white" stroke-width="1.3" stroke-linecap="round"/>
        <path d="M13 17 Q15 19 17 17" stroke="white" stroke-width="1.3" fill="none"/>
        <path d="M21 11 Q29 16 29 21 Q29 26 21 31" stroke="#C0392B" stroke-width="1.4" fill="none" stroke-linecap="round"/>
        <polygon points="24,18 24.6,20 26.5,20 25,21.2 25.6,23.2 24,22 22.4,23.2 23,21.2 21.5,20 23.4,20" fill="#C0392B"/>
      </svg>
      <div>
        <div class="sidebar-logo-name">Global Epicure</div>
        <div class="sidebar-logo-tag">Food Rating Platform</div>
      </div>
    </div>
    <nav class="nav-menu">
      <div class="nav-item active" onclick="showPage('home',this)"><span class="nav-icon">üè†</span>Home</div>
      <div class="nav-item" onclick="showPage('delicacies',this)"><span class="nav-icon">üçΩÔ∏è</span>Delicacies</div>
      <div class="nav-item" onclick="showPage('wallet',this)"><span class="nav-icon">üí∞</span>Wallet</div>
      <div class="nav-item" onclick="showPage('incentives',this)"><span class="nav-icon">üéÅ</span>Incentives</div>
    </nav>
    <div class="sidebar-footer">
      <div class="user-chip">
        <div class="user-avatar" id="sidebarAvatar">JD</div>
        <div>
          <div class="user-name" id="sidebarName">John Doe</div>
          <div class="user-id" id="sidebarId">GE-000001</div>
        </div>
      </div>
    </div>
  </aside>
  <div class="main">
    <div class="topbar">
      <div style="display:flex;align-items:center;gap:10px;">
        <button class="mobile-menu-btn" onclick="document.getElementById('sidebar').classList.toggle('open')">‚ò∞</button>
        <span class="topbar-title" id="topbarTitle">Dashboard</span>
      </div>
      <div class="topbar-right">
        <div class="icon-btn" onclick="openModal('notifModal')">üîî<div class="notif-dot"></div></div>
        <div class="dots-wrap">
          <div class="dots-btn" onclick="toggleDots()">‚ãÆ</div>
          <div class="dots-dropdown" id="dotsDropdown">
            <div class="dots-item" onclick="openModal('profileModal');closeDots()">üë§ My Profile</div>
            <div class="dots-item" onclick="openModal('settingsModal');closeDots()">‚öôÔ∏è Account Settings</div>
            <div class="dots-item" onclick="openModal('langModal');closeDots()">üåê Language</div>
            <div class="dots-item" onclick="openModal('notifModal');closeDots()">üîî Notifications</div>
            <div class="dots-item" onclick="openModal('supportModal');closeDots()">üí¨ Help / Support</div>
            <div class="dots-item" onclick="openModal('contactModal');closeDots()">üìû Contact Us</div>
            <div class="dots-item" onclick="openModal('aboutModal');closeDots()">‚ÑπÔ∏è About Us</div>
            <div class="dots-item" onclick="openModal('termsModal');closeDots()">üìÑ Terms of Service</div>
            <div class="dots-item" onclick="openModal('privacyModal');closeDots()">üîí Privacy Policy</div>
            <div class="dots-item danger" onclick="logout()">üö™ Log Out</div>
          </div>
        </div>
      </div>
    </div>
    <div class="page-content">
      <div class="page active" id="page-home">
        <div class="welcome-banner">
          <h1>Welcome to the Global Dish Rating Platform</h1>
          <p>Rate dishes from around the world, earn rewards, and become part of a growing community of food lovers.</p>
        </div>
        <div class="stats-grid">
          <div class="stat-card"><div class="stat-label">Welcome Bonus</div><div class="stat-value gold">$<span id="hBonus">50.00</span></div></div>
          <div class="stat-card"><div class="stat-label">Balance</div><div class="stat-value green">$<span id="hBal">0.00</span></div></div>
          <div class="stat-card"><div class="stat-label">Total Earnings</div><div class="stat-value green">$<span id="hEarn">0.00</span></div></div>
          <div class="stat-card"><div class="stat-label">Dishes Rated Today</div><div class="stat-value dim" id="hDishes">0 / 96</div></div>
          <div class="stat-card"><div class="stat-label">Current Round</div><div class="stat-value dim" id="hRound">1 of 3</div></div>
          <div class="stat-card"><div class="stat-label">Pending Withdrawal</div><div class="stat-value red-val">$<span id="hPend">0.00</span></div></div>
        </div>
      </div>
      <div class="page" id="page-delicacies">
        <div class="section-header">
          <div class="section-eyebrow">Rate & Discover</div>
          <div class="section-title">Delicacies</div>
        </div>
        <div class="round-info">
          <div class="round-badge active-round" id="rb1">Round 1 ‚Äî Bonus</div>
          <div class="round-badge" id="rb2">Round 2 ‚Äî $30 Deposit</div>
          <div class="round-badge" id="rb3">Round 3 ‚Äî Haute Cuisine</div>
        </div>
        <div class="progress-bar-wrap">
          <div class="progress-label"><span>Progress</span><span id="progText">0 / 32</span></div>
          <div class="progress-bar"><div class="progress-fill" id="progFill" style="width:0%"></div></div>
        </div>
        <div class="unlock-msg" id="unlockMsg"></div>
        <div id="dishViewer" class="dish-viewer">
          <div class="dish-img-wrap">
            <img class="dish-img" id="dishImg" src="" alt=""/>
            <div class="dish-num-badge" id="dishNum">Dish 1 of 32</div>
            <div class="special-badge" id="specialBadge">‚≠ê Haute Cuisine</div>
          </div>
          <div class="dish-body">
            <div class="dish-country" id="dishCountry"></div>
            <div class="dish-name" id="dishName"></div>
            <div class="dish-reviews" id="dishReviews"></div>
            <div class="star-rating" id="stars">
              <span class="star" onclick="setRating(1)">‚òÖ</span>
              <span class="star" onclick="setRating(2)">‚òÖ</span>
              <span class="star" onclick="setRating(3)">‚òÖ</span>
              <span class="star" onclick="setRating(4)">‚òÖ</span>
              <span class="star" onclick="setRating(5)">‚òÖ</span>
            </div>
            <div class="dish-earn" id="dishEarn"></div>
            <div class="dish-actions">
              <button class="btn-rate" id="rateBtn" onclick="rateDish()">Rate Dish</button>
              <button class="btn-next" onclick="nextDish()">Next ‚Üí</button>
            </div>
          </div>
        </div>
        <div class="depleted-msg" id="depletedMsg">
          <div style="font-size:3rem;margin-bottom:14px;">üçΩÔ∏è</div>
          <h3>Dishes Depleted</h3>
          <p>You have rated all available dishes for today.<br/>Come back tomorrow for more!</p>
        </div>
      </div>
      <div class="page" id="page-wallet">
        <div class="section-header">
          <div class="section-eyebrow">Financial Overview</div>
          <div class="section-title">Wallet</div>
        </div>
        <div class="wallet-grid">
          <div class="wallet-cell"><div class="wallet-cell-label">Welcome Bonus</div><div class="wallet-cell-value gold">$<span id="wBonus">50.00</span></div></div>
          <div class="wallet-cell"><div class="wallet-cell-label">Daily Dishes Rated</div><div class="wallet-cell-value dim" id="wDaily">0</div></div>
          <div class="wallet-cell"><div class="wallet-cell-label">Balance</div><div class="wallet-cell-value green">$<span id="wBal">0.00</span></div></div>
          <div class="wallet-cell"><div class="wallet-cell-label">Earnings</div><div class="wallet-cell-value green">$<span id="wEarn">0.00</span></div></div>
          <div class="wallet-cell"><div class="wallet-cell-label">Rounds Completed</div><div class="wallet-cell-value dim" id="wRounds">0</div></div>
          <div class="wallet-cell"><div class="wallet-cell-label">Pending Withdrawals</div><div class="wallet-cell-value red-val">$<span id="wPendWith">0.00</span></div></div>
          <div class="wallet-cell"><div class="wallet-cell-label">Pending Earnings</div><div class="wallet-cell-value gold">$<span id="wPendEarn">0.00</span></div></div>
          <div class="wallet-cell"><div class="wallet-cell-label">Special Ratings</div><div class="wallet-cell-value dim" id="wSpecial">0</div></div>
          <div class="wallet-cell"><div class="wallet-cell-label">Total Withdrawals</div><div class="wallet-cell-value dim">$<span id="wTotalWith">0.00</span></div></div>
        </div>
        <div class="wallet-btns">
          <button class="btn-wallet btn-deposit" onclick="openPayFlow('deposit')">+ Deposit</button>
          <button class="btn-wallet btn-withdraw" onclick="openPayFlow('withdraw')">‚Üë Withdraw</button>
        </div>
      </div>
      <div class="page" id="page-incentives">
        <div class="section-header">
          <div class="section-eyebrow">Earn More</div>
          <div class="section-title">Incentives</div>
        </div>
        <div class="incentives-grid">
          <div class="incentive-card ic-1" onclick="openModal('bonusModal')">
            <div class="incentive-content"><div class="incentive-icon">üéÅ</div><div class="incentive-title">Bonuses</div><div class="incentive-desc">All available bonuses for your activity.</div></div>
          </div>
          <div class="incentive-card ic-2" onclick="openModal('rewardsModal')">
            <div class="incentive-content"><div class="incentive-icon">üèÜ</div><div class="incentive-title">Rewards</div><div class="incentive-desc">Exclusive rewards for top raters and loyal members.</div></div>
          </div>
          <div class="incentive-card ic-3" onclick="openModal('rulesModal')">
            <div class="incentive-content"><div class="incentive-icon">üìã</div><div class="incentive-title">Rules</div><div class="incentive-desc">Platform rules, eligibility and withdrawal terms.</div></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
  <!-- PAYMENT METHOD -->
  <div class="modal-overlay" id="payMethodModal">
    <div class="modal">
      <button class="modal-close" onclick="closeModal('payMethodModal')">‚úï</button>
      <h3 id="payMethodTitle">Select Method</h3>
      <p class="modal-sub">Choose your preferred payment method.</p>
      <div class="payment-methods">
        <div class="pay-method" onclick="goToAmount()"><span class="pay-icon">üè¶</span>Bank Transfer</div>
        <div class="pay-method" onclick="goToAmount()"><span class="pay-icon">üí≥</span>PayPal</div>
        <div class="pay-method" onclick="goToAmount()"><span class="pay-icon">‚Çø</span>Crypto</div>
        <div class="pay-method" onclick="goToAmount()"><span class="pay-icon">üìä</span>Bybit</div>
        <div class="pay-method" onclick="goToAmount()"><span class="pay-icon">üìà</span>Bitget</div>
      </div>
    </div>
  </div>
  <!-- AMOUNT -->
  <div class="modal-overlay" id="amountModal">
    <div class="modal">
      <button class="modal-close" onclick="closeModal('amountModal')">‚úï</button>
      <h3 id="amountTitle">Enter Amount</h3>
      <p class="modal-sub" id="amountSub">Select or enter an amount.</p>
      <div class="amount-grid">
        <div class="amount-btn" onclick="pickAmt(10,this)">$10</div>
        <div class="amount-btn" onclick="pickAmt(15,this)">$15</div>
        <div class="amount-btn" onclick="pickAmt(20,this)">$20</div>
        <div class="amount-btn" onclick="pickAmt(25,this)">$25</div>
        <div class="amount-btn" onclick="pickAmt(50,this)">$50</div>
        <div class="amount-btn" onclick="pickAmt(1000,this)">$1,000</div>
      </div>
      <input class="manual-input" type="number" id="manualAmt" placeholder="Or enter amount manually..."/>
      <button class="btn-confirm" onclick="confirmPay()">Confirm</button>
      <div class="success-msg" id="paySuccess"></div>
    </div>
  </div>
  <!-- PROFILE -->
  <div class="modal-overlay" id="profileModal">
    <div class="modal">
      <button class="modal-close" onclick="closeModal('profileModal')">‚úï</button>
      <h3>My Profile</h3>
      <div style="margin-top:22px;">
        <div class="profile-avatar-lg" id="profAvatar">JD</div>
        <div class="profile-info">
          <div class="profile-name" id="profName">John Doe</div>
          <div class="profile-email" id="profEmail">john@example.com</div>
          <div class="profile-id-badge" id="profId">ID: GE-000001</div>
        </div>
        <div class="referral-box">
          <div class="referral-label">Your Referral ID</div>
          <div class="referral-id" id="refId">GE-000001</div>
          <div style="font-size:0.68rem;color:rgba(245,245,240,0.35);margin-top:5px;">Share this ID with friends to earn $3 referral bonus each.</div>
        </div>
      </div>
    </div>
  </div>
  <!-- SETTINGS -->
  <div class="modal-overlay" id="settingsModal">
    <div class="modal">
      <button class="modal-close" onclick="closeModal('settingsModal')">‚úï</button>
      <h3>Account Settings</h3>
      <div style="margin-top:22px;">
        <div class="settings-label">Theme</div>
        <div class="theme-btns">
          <div class="theme-btn active" onclick="setTheme('dark',this)">üåô Dark Mode</div>
          <div class="theme-btn" onclick="setTheme('light',this)">‚òÄÔ∏è Light Mode</div>
        </div>
      </div>
    </div>
  </div>
  <!-- LANGUAGE -->
  <div class="modal-overlay" id="langModal">
    <div class="modal">
      <button class="modal-close" onclick="closeModal('langModal')">‚úï</button>
      <h3>Language</h3>
      <p class="modal-sub">Select your preferred language.</p>
      <select class="lang-select">
        <option>üá¨üáß English</option>
        <option>üá´üá∑ French ‚Äî Fran√ßais</option>
        <option>üá™üá∏ Spanish ‚Äî Espa√±ol</option>
        <option>üá∞üá™ Swahili ‚Äî Kiswahili</option>
        <option>üá∏üá¶ Arabic ‚Äî ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
      </select>
      <button class="btn-confirm" style="margin-top:14px;" onclick="closeModal('langModal')">Save Language</button>
    </div>
  </div>
  <!-- NOTIFICATIONS -->
  <div class="modal-overlay" id="notifModal">
    <div class="modal">
      <button class="modal-close" onclick="closeModal('notifModal')">‚úï</button>
      <h3>Notifications</h3>
      <div style="margin-top:18px;">
        <div class="notif-item"><div class="notif-dot-sm"></div><div><div class="notif-text">New dish added: <strong>Jollof Rice</strong> is now available!</div><div class="notif-time">2 minutes ago</div></div></div>
        <div class="notif-item"><div class="notif-dot-sm"></div><div><div class="notif-text">Your withdrawal of <strong>$15.00</strong> is being processed.</div><div class="notif-time">1 hour ago</div></div></div>
        <div class="notif-item"><div class="notif-dot-sm"></div><div><div class="notif-text">Welcome bonus of <strong>$50.00</strong> added to your account!</div><div class="notif-time">Today</div></div></div>
        <div class="notif-item" style="border:none;"><div class="notif-dot-sm" style="background:rgba(255,255,255,0.15)"></div><div><div class="notif-text" style="color:rgba(245,245,240,0.35);">Round 1 unlocked. Start rating dishes to earn.</div><div class="notif-time">Today</div></div></div>
      </div>
    </div>
  </div>
  <!-- SUPPORT -->
  <div class="modal-overlay" id="supportModal">
    <div class="modal">
      <button class="modal-close" onclick="closeModal('supportModal')">‚úï</button>
      <h3>Help / Support</h3>
      <p class="modal-sub">Contact our support team for assistance.</p>
      <div class="payment-methods">
        <div class="pay-method"><span class="pay-icon">üí¨</span>Live Chat with Admin</div>
        <div class="pay-method"><span class="pay-icon">üìß</span>support@globalepicure.com</div>
        <div class="pay-method"><span class="pay-icon">üì±</span>WhatsApp Support</div>
      </div>
    </div>
  </div>
  <!-- CONTACT -->
  <div class="modal-overlay" id="contactModal">
    <div class="modal">
      <button class="modal-close" onclick="closeModal('contactModal')">‚úï</button>
      <h3>Contact Us</h3>
      <p class="modal-sub">Get in touch with the Global Epicure team.</p>
      <div class="payment-methods">
        <div class="pay-method"><span class="pay-icon">üìß</span>hello@globalepicure.com</div>
        <div class="pay-method"><span class="pay-icon">üì±</span>+1 (800) EPICURE</div>
        <div class="pay-method"><span class="pay-icon">üê¶</span>@GlobalEpicure</div>
        <div class="pay-method"><span class="pay-icon">üìò</span>Facebook: Global Epicure</div>
      </div>
    </div>
  </div>
  <!-- ABOUT -->
  <div class="modal-overlay" id="aboutModal">
    <div class="modal">
      <button class="modal-close" onclick="closeModal('aboutModal')">‚úï</button>
      <h3>About Us</h3>
      <div class="text-content" style="margin-top:18px;">
        <p>Welcome to <strong>Global Epicure</strong> ‚Äî a global community of food lovers who rate, review, and discover the best dishes from all over the world.</p>
        <h4>What We Do</h4>
        <p>We provide a platform where you can rate dishes, write detailed reviews, and earn rewards for your contributions. Explore global cuisines and help others find their next favorite meal.</p>
        <h4>Why We Do It</h4>
        <p>Food connects people. It crosses borders, celebrates culture, and brings people together. We created Global Epicure to help food lovers share their experiences and explore new flavors.</p>
        <h4>Our Values</h4>
        <ul>
          <li><strong>Community:</strong> A supportive environment for all food lovers.</li>
          <li><strong>Integrity:</strong> Honest and unbiased reviews are our foundation.</li>
          <li><strong>Inclusion:</strong> We celebrate all food preferences and backgrounds.</li>
          <li><strong>Exploration:</strong> We encourage trying new dishes and cuisines.</li>
        </ul>
      </div>
    </div>
  </div>
  <!-- TERMS -->
  <div class="modal-overlay" id="termsModal">
    <div class="modal">
      <button class="modal-close" onclick="closeModal('termsModal')">‚úï</button>
      <h3>Terms of Service</h3>
      <div class="text-content" style="margin-top:18px;">
        <h4>1. Acceptance</h4><p>By using Global Epicure, you agree to these terms.</p>
        <h4>2. User Conduct</h4><p>Users must provide honest ratings. Fake reviews or fraud will result in immediate termination.</p>
        <h4>3. Earnings & Withdrawals</h4><p>Minimum withdrawal is $10. Complete Round 1 before requesting withdrawal. Processing takes 1‚Äì3 business days.</p>
        <h4>4. Deposits</h4><p>A $30 balance is required to unlock Round 2. Deposits are non-refundable once a round has started.</p>
        <h4>5. Changes</h4><p>We may update these terms at any time. Continued use constitutes acceptance.</p>
      </div>
    </div>
  </div>
  <!-- PRIVACY -->
  <div class="modal-overlay" id="privacyModal">
    <div class="modal">
      <button class="modal-close" onclick="closeModal('privacyModal')">‚úï</button>
      <h3>Privacy Policy</h3>
      <div class="text-content" style="margin-top:18px;">
        <h4>Data We Collect</h4><p>We collect your name, email or phone number, dish ratings, and financial transaction data.</p>
        <h4>How We Use It</h4><p>Your data is used to operate the platform, process payments, and improve your experience.</p>
        <h4>Data Sharing</h4><p>We do not sell your personal data. We share data with payment processors only for transactions.</p>
        <h4>Your Rights</h4><p>Request deletion of your account at any time by emailing support@globalepicure.com.</p>
      </div>
    </div>
  </div>
  <!-- BONUSES -->
  <div class="modal-overlay" id="bonusModal">
    <div class="modal">
      <button class="modal-close" onclick="closeModal('bonusModal')">‚úï</button>
      <h3>Bonuses</h3>
      <div style="margin-top:20px;">
        <table class="bonus-table">
          <thead><tr><th>Bonus Type</th><th>Amount</th></tr></thead>
          <tbody>
            <tr><td>Welcome Bonus</td><td class="bonus-amount">$50.00</td></tr>
            <tr><td>First Deposit Bonus</td><td class="bonus-amount">$6.00</td></tr>
            <tr><td>Referral Bonus (per person)</td><td class="bonus-amount">$3.00</td></tr>
            <tr><td>Daily Sign-In Bonus (7 days)</td><td class="bonus-amount">$25.00</td></tr>
            <tr><td>Monthly Sign-In Bonus</td><td class="bonus-amount">$75.00</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <!-- REWARDS -->
  <div class="modal-overlay" id="rewardsModal">
    <div class="modal">
      <button class="modal-close" onclick="closeModal('rewardsModal')">‚úï</button>
      <h3>Rewards</h3>
      <div class="text-content" style="margin-top:18px;">
        <h4>üé¥ Restaurant Gift Cards</h4>
        <p>Complete one month of consecutive daily sign-ins to earn gift cards to top restaurant chains and local favourites.</p>
        <h4>üèÖ Top Rater Badge + $250 Bonus</h4>
        <p>Rate 100 dishes in a single month to earn the exclusive <strong>Top Rater Badge</strong> plus a <strong>$250 bonus</strong> added directly to your wallet.</p>
      </div>
    </div>
  </div>
  <!-- RULES -->
  <div class="modal-overlay" id="rulesModal">
    <div class="modal">
      <button class="modal-close" onclick="closeModal('rulesModal')">‚úï</button>
      <h3>Rules</h3>
      <div class="text-content" style="margin-top:18px;">
        <h4>Withdrawals</h4><p>Minimum withdrawal is <strong>$10</strong>. Complete Round 1 before your first withdrawal.</p>
        <h4>Daily Limit</h4><p>Maximum <strong>96 dishes per day</strong> ‚Äî 3 rounds of 32 dishes each.</p>
        <h4>Deposit Requirement</h4><p>Maintain a minimum balance of <strong>$30</strong> to unlock Round 2 and access 96 daily ratings.</p>
        <h4>Referrals</h4><p>The invited person must sign up and complete 3 days of ratings for the bonus to be credited.</p>
        <h4>Referral Eligibility</h4><p>You must have worked for <strong>7 days</strong> and earned your first weekly bonus before inviting others.</p>
      </div>
    </div>
  </div>
<script>
const S = {
  user: { name:'John Doe', email:'john@example.com', id:'GE-'+String(Math.floor(Math.random()*900000)+100000) },
  bonus:50, balance:0, earnings:0, pendingWith:0, totalWith:0, pendingEarn:0,
  dailyDishes:0, roundsCompleted:0, specialRatings:0,
  round:1, dishIdx:0, rating:0, rated:[],
  payFlow:'deposit', selAmt:0
};

const dishes=[
  {name:'Tonkotsu Ramen',country:'üáØüáµ Japan',img:'https://images.unsplash.com/photo-1574894709920-11b28e7367e3?w=600&q=70',rev:rndRev()},
  {name:'Jollof Rice',country:'üá≥üá¨ Nigeria',img:'https://images.unsplash.com/photo-1604329760661-e71dc83f8f26?w=600&q=70',rev:rndRev()},
  {name:'Tacos al Pastor',country:'üá≤üáΩ Mexico',img:'https://images.unsplash.com/photo-1565299507177-b0ac66763828?w=600&q=70',rev:rndRev()},
  {name:'Hyderabadi Biryani',country:'üáÆüá≥ India',img:'https://images.unsplash.com/photo-1512058564366-18510be2db19?w=600&q=70',rev:rndRev()},
  {name:'Cacio e Pepe',country:'üáÆüáπ Italy',img:'https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=600&q=70',rev:rndRev()},
  {name:'Pad Thai',country:'üáπüá≠ Thailand',img:'https://images.unsplash.com/photo-1559314809-0d155014e29e?w=600&q=70',rev:rndRev()},
  {name:'Moussaka',country:'üá¨üá∑ Greece',img:'https://images.unsplash.com/photo-1544025162-d76694265947?w=600&q=70',rev:rndRev()},
  {name:'Beef Bulgogi',country:'üá∞üá∑ South Korea',img:'https://images.unsplash.com/photo-1583623025817-d180a2221d0a?w=600&q=70',rev:rndRev()},
  {name:'Pho Bo',country:'üáªüá≥ Vietnam',img:'https://images.unsplash.com/photo-1585032226651-759b368d7246?w=600&q=70',rev:rndRev()},
  {name:'Bobotie',country:'üáøüá¶ South Africa',img:'https://images.unsplash.com/photo-1547592180-85f173990554?w=600&q=70',rev:rndRev()},
  {name:'Churrasco',country:'üáßüá∑ Brazil',img:'https://images.unsplash.com/photo-1558030006-450675393462?w=600&q=70',rev:rndRev()},
  {name:'Shakshuka',country:'üáÆüá± Israel',img:'https://images.unsplash.com/photo-1590947132387-155cc02f3212?w=600&q=70',rev:rndRev()},
  {name:'Rendang',country:'üáÆüá© Indonesia',img:'https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=600&q=70',rev:rndRev()},
  {name:'Coq au Vin',country:'üá´üá∑ France',img:'https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=600&q=70',rev:rndRev(),special:true,mult:3,minBal:100},
  {name:'Fufu & Egusi Soup',country:'üá¨üá≠ Ghana',img:'https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=600&q=70',rev:rndRev()},
  {name:'Pierogi',country:'üáµüá± Poland',img:'https://images.unsplash.com/photo-1574894709920-11b28e7367e3?w=600&q=70',rev:rndRev()},
  {name:'Nasi Goreng',country:'üáÆüá© Indonesia',img:'https://images.unsplash.com/photo-1512058564366-18510be2db19?w=600&q=70',rev:rndRev()},
  {name:'Tagine',country:'üá≤üá¶ Morocco',img:'https://images.unsplash.com/photo-1547592180-85f173990554?w=600&q=70',rev:rndRev()},
  {name:'Fish & Chips',country:'üá¨üáß UK',img:'https://images.unsplash.com/photo-1558030006-450675393462?w=600&q=70',rev:rndRev()},
  {name:'Sushi Omakase',country:'üáØüáµ Japan',img:'https://images.unsplash.com/photo-1574894709920-11b28e7367e3?w=600&q=70',rev:rndRev()},
  {name:'Borscht',country:'üá∫üá¶ Ukraine',img:'https://images.unsplash.com/photo-1585032226651-759b368d7246?w=600&q=70',rev:rndRev()},
  {name:'Injera & Doro Wat',country:'üá™üáπ Ethiopia',img:'https://images.unsplash.com/photo-1604329760661-e71dc83f8f26?w=600&q=70',rev:rndRev()},
  {name:'Peking Duck',country:'üá®üá≥ China',img:'https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=600&q=70',rev:rndRev()},
  {name:'Ceviche',country:'üáµüá™ Peru',img:'https://images.unsplash.com/photo-1565299507177-b0ac66763828?w=600&q=70',rev:rndRev()},
  {name:'Mansaf',country:'üáØüá¥ Jordan',img:'https://images.unsplash.com/photo-1547592180-85f173990554?w=600&q=70',rev:rndRev()},
  {name:'Khachapuri',country:'üá¨üá™ Georgia',img:'https://images.unsplash.com/photo-1590947132387-155cc02f3212?w=600&q=70',rev:rndRev()},
  {name:'Pastel de Nata',country:'üáµüáπ Portugal',img:'https://images.unsplash.com/photo-1558030006-450675393462?w=600&q=70',rev:rndRev()},
  {name:'Lobster Thermidor',country:'üá´üá∑ France',img:'https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=600&q=70',rev:rndRev(),special:true,mult:4,minBal:600},
  {name:'Baklava',country:'üáπüá∑ Turkey',img:'https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=600&q=70',rev:rndRev()},
  {name:'Mole Poblano',country:'üá≤üáΩ Mexico',img:'https://images.unsplash.com/photo-1583623025817-d180a2221d0a?w=600&q=70',rev:rndRev()},
  {name:'Tom Yum Goong',country:'üáπüá≠ Thailand',img:'https://images.unsplash.com/photo-1559314809-0d155014e29e?w=600&q=70',rev:rndRev()},
  {name:'Wagyu Tasting Menu',country:'üáØüáµ Japan',img:'https://images.unsplash.com/photo-1574894709920-11b28e7367e3?w=600&q=70',rev:rndRev(),special:true,mult:5,minBal:1000},
];

function rndRev(){return Math.floor(Math.random()*(6000-300)+300).toLocaleString();}

const totalEarn=15+Math.random()*9;
const earnPerDish=dishes.map(()=>+((totalEarn/32)*(0.7+Math.random()*0.6)).toFixed(2));
const bonusPerDish=+(50/32).toFixed(4);

function init(){
  const u=S.user;
  ['sidebarName','profName'].forEach(id=>document.getElementById(id).textContent=u.name);
  ['sidebarId','profId','refId'].forEach(id=>document.getElementById(id).textContent=(id==='profId'?'ID: ':'')+u.id);
  const ini=u.name.split(' ').map(n=>n[0]).join('');
  ['sidebarAvatar','profAvatar'].forEach(id=>document.getElementById(id).textContent=ini);
  document.getElementById('profEmail').textContent=u.email;
  loadDish(); updateUI();
}

function showPage(p,el){
  document.querySelectorAll('.page').forEach(x=>x.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(x=>x.classList.remove('active'));
  document.getElementById('page-'+p).classList.add('active');
  if(el) el.classList.add('active');
  const titles={home:'Dashboard',delicacies:'Delicacies',wallet:'Wallet',incentives:'Incentives'};
  document.getElementById('topbarTitle').textContent=titles[p];
  if(window.innerWidth<=768) document.getElementById('sidebar').classList.remove('open');
}

function toggleDots(){document.getElementById('dotsDropdown').classList.toggle('open');}
function closeDots(){document.getElementById('dotsDropdown').classList.remove('open');}
document.addEventListener('click',e=>{if(!e.target.closest('.dots-wrap'))closeDots();});

function openModal(id){document.getElementById(id).classList.add('open');}
function closeModal(id){document.getElementById(id).classList.remove('open');}
document.querySelectorAll('.modal-overlay').forEach(m=>m.addEventListener('click',e=>{if(e.target===m)m.classList.remove('open');}));

function loadDish(){
  const i=S.dishIdx%32;
  const d=dishes[i];
  const um=document.getElementById('unlockMsg');
  const rb=document.getElementById('rateBtn');

  if(S.round===2 && S.balance<30){
    um.style.display='block';
    um.innerHTML='üîí <strong>Round 2 Locked.</strong> Deposit at least $30 to unlock this round.';
    rb.disabled=true; return;
  }
  if(S.round===3 && d.special && d.minBal && S.balance<d.minBal){
    um.style.display='block';
    um.innerHTML=`üîí <strong>Haute Cuisine Locked.</strong> You need a balance of <strong>$${d.minBal}</strong> to rate this dish.`;
    rb.disabled=true; return;
  }
  um.style.display='none'; rb.disabled=false;

  document.getElementById('dishImg').src=d.img;
  document.getElementById('dishCountry').textContent=d.country;
  document.getElementById('dishName').textContent=d.name;
  document.getElementById('dishReviews').textContent=d.rev+' reviews';
  document.getElementById('dishNum').textContent=`Dish ${i+1} of 32`;

  const sb=document.getElementById('specialBadge');
  if(d.special && S.round===3){sb.style.display='block';sb.textContent=`‚≠ê x${d.mult} Earnings`;}
  else sb.style.display='none';

  const mult=(d.special&&S.round===3)?d.mult:1;
  const earn=(earnPerDish[i]*mult).toFixed(2);
  document.getElementById('dishEarn').innerHTML=`Rate to earn <span>+$${earn}</span>`;

  S.rating=0;
  document.querySelectorAll('.star').forEach(s=>s.classList.remove('active'));
  updateProg();
  updateRoundBadges();
}

function setRating(n){
  S.rating=n;
  document.querySelectorAll('.star').forEach((s,i)=>s.classList.toggle('active',i<n));
}

function rateDish(){
  if(!S.rating){alert('Please select a star rating!');return;}
  const i=S.dishIdx%32;
  const d=dishes[i];
  const mult=(d.special&&S.round===3)?d.mult:1;
  const earn=+(earnPerDish[i]*mult).toFixed(2);

  if(S.round===1) S.bonus=+Math.max(0,(S.bonus-bonusPerDish)).toFixed(2);
  S.earnings=+(S.earnings+earn).toFixed(2);
  S.pendingEarn=+(S.pendingEarn+earn).toFixed(2);
  S.dailyDishes++;
  S.rated.push(i);
  if(d.special&&S.round===3) S.specialRatings++;

  document.getElementById('rateBtn').disabled=true;
  updateUI(); updateProg();
}

function nextDish(){
  if(!S.rated.includes(S.dishIdx%32)){alert('Please rate this dish first!');return;}
  S.dishIdx++;
  const i=S.dishIdx%32;
  if(i===0&&S.dishIdx>0){
    S.roundsCompleted++;
    if(S.round<3){S.round++;S.rated=[];alert(`Round ${S.round-1} complete! ${S.round===2?'Deposit $30 to unlock Round 2.':'Round 3 (Haute Cuisine) unlocked!'}`);}
  }
  if(S.dailyDishes>=96){
    document.getElementById('dishViewer').style.display='none';
    document.getElementById('depletedMsg').style.display='block';
    return;
  }
  loadDish();
}

function updateProg(){
  const done=S.dishIdx%32;
  document.getElementById('progFill').style.width=(done/32*100)+'%';
  document.getElementById('progText').textContent=done+' / 32';
}

function updateRoundBadges(){
  ['rb1','rb2','rb3'].forEach((id,i)=>{
    document.getElementById(id).classList.toggle('active-round',S.round===i+1);
  });
}

function openPayFlow(t){
  S.payFlow=t; S.selAmt=0;
  document.querySelectorAll('.amount-btn').forEach(b=>b.classList.remove('selected'));
  document.getElementById('manualAmt').value='';
  document.getElementById('paySuccess').style.display='none';
  document.getElementById('payMethodTitle').textContent=t==='deposit'?'Deposit ‚Äî Select Method':'Withdraw ‚Äî Select Method';
  openModal('payMethodModal');
}

function goToAmount(){
  closeModal('payMethodModal');
  document.getElementById('amountTitle').textContent=S.payFlow==='deposit'?'Enter Deposit Amount':'Enter Withdrawal Amount';
  document.getElementById('amountSub').textContent=S.payFlow==='deposit'?'Select or enter amount to deposit.':'Minimum withdrawal: $10.';
  document.getElementById('paySuccess').style.display='none';
  openModal('amountModal');
}

function pickAmt(amt,el){
  S.selAmt=amt;
  document.getElementById('manualAmt').value='';
  document.querySelectorAll('.amount-btn').forEach(b=>b.classList.remove('selected'));
  el.classList.add('selected');
}

function confirmPay(){
  const manual=parseFloat(document.getElementById('manualAmt').value);
  const amt=manual>0?manual:S.selAmt;
  if(!amt||amt<=0){alert('Please select or enter an amount.');return;}
  const ps=document.getElementById('paySuccess');
  if(S.payFlow==='deposit'){
    S.balance=+(S.balance+amt).toFixed(2);
    ps.textContent='‚úì Contact admin to complete your deposit. Balance will update once confirmed.';
  } else {
    if(amt<10){alert('Minimum withdrawal is $10.');return;}
    if(amt>S.earnings){alert('Insufficient earnings.');return;}
    S.earnings=+(S.earnings-amt).toFixed(2);
    S.pendingWith=+(S.pendingWith+amt).toFixed(2);
    ps.textContent=`‚úì $${amt.toFixed(2)} moved to Pending Withdrawals. Your withdrawal is being processed.`;
  }
  ps.style.display='block';
  updateUI();
}

function updateUI(){
  const f=n=>n.toFixed(2);
  document.getElementById('hBonus').textContent=f(S.bonus);
  document.getElementById('hBal').textContent=f(S.balance);
  document.getElementById('hEarn').textContent=f(S.earnings);
  document.getElementById('hDishes').textContent=S.dailyDishes+' / 96';
  document.getElementById('hRound').textContent=S.round+' of 3';
  document.getElementById('hPend').textContent=f(S.pendingWith);
  document.getElementById('wBonus').textContent=f(S.bonus);
  document.getElementById('wBal').textContent=f(S.balance);
  document.getElementById('wEarn').textContent=f(S.earnings);
  document.getElementById('wPendWith').textContent=f(S.pendingWith);
  document.getElementById('wPendEarn').textContent=f(S.pendingEarn);
  document.getElementById('wTotalWith').textContent=f(S.totalWith);
  document.getElementById('wDaily').textContent=S.dailyDishes;
  document.getElementById('wRounds').textContent=S.roundsCompleted;
  document.getElementById('wSpecial').textContent=S.specialRatings;
}

function setTheme(t,el){
  document.querySelectorAll('.theme-btn').forEach(b=>b.classList.remove('active'));
  el.classList.add('active');
  if(t==='light'){document.body.style.background='#f0ede8';document.body.style.color='#0a0a0a';}
  else{document.body.style.background='#0a0a0a';document.body.style.color='#f5f5f0';}
}

function logout(){window.location.href='index.html';}

init();
</script>
</body>
</html>
