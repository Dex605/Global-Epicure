<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sign Up ‚Äì Global Epicure</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Jost:wght@300;400;500&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root { --red: #C0392B; --red-light: #E74C3C; --black: #0a0a0a; --white: #f5f5f0; --glass: rgba(255,255,255,0.06); --glass-border: rgba(255,255,255,0.12); --input-bg: rgba(255,255,255,0.05); }
    html, body { height: 100%; font-family: 'Jost', sans-serif; background: var(--black); color: var(--white); }
    .page-wrap { min-height: 100vh; display: flex; }
    .left-panel { flex: 1; background-image: url('https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=1200&q=80'); background-size: cover; background-position: center; position: relative; display: none; }
    @media(min-width: 900px) { .left-panel { display: block; } }
    .left-panel::after { content: ''; position: absolute; inset: 0; background: linear-gradient(135deg, rgba(10,10,10,0.7) 0%, rgba(192,57,43,0.3) 100%); }
    .left-panel-content { position: absolute; inset: 0; z-index: 2; display: flex; flex-direction: column; justify-content: flex-end; padding: 48px; }
    .left-panel-content blockquote { font-family: 'Playfair Display', serif; font-size: 1.55rem; line-height: 1.4; color: var(--white); margin-bottom: 16px; }
    .left-panel-content cite { font-size: 0.75rem; color: rgba(245,245,240,0.5); letter-spacing: 0.12em; text-transform: uppercase; font-style: normal; }
    .right-panel { width: 100%; max-width: 520px; display: flex; flex-direction: column; justify-content: center; padding: 48px 40px; background: rgba(8,8,8,0.98); }
    @media(min-width: 900px) { .right-panel { border-left: 1px solid var(--glass-border); } }
    .back-link { display: inline-flex; align-items: center; gap: 6px; color: rgba(245,245,240,0.45); font-size: 0.75rem; letter-spacing: 0.08em; text-transform: uppercase; text-decoration: none; margin-bottom: 36px; transition: color 0.2s; }
    .back-link:hover { color: var(--white); }
    .brand { display: flex; align-items: center; gap: 10px; margin-bottom: 28px; }
    .brand-name { font-family: 'Playfair Display', serif; font-size: 1.1rem; }
    .brand-tag { font-size: 0.58rem; color: var(--red-light); letter-spacing: 0.12em; text-transform: uppercase; margin-top: 2px; }
    h2 { font-family: 'Playfair Display', serif; font-size: 1.9rem; margin-bottom: 6px; }
    .subtitle { font-size: 0.82rem; color: rgba(245,245,240,0.45); margin-bottom: 28px; font-weight: 300; }
    .btn-google { display: flex; align-items: center; justify-content: center; gap: 10px; width: 100%; padding: 12px; border: 1px solid var(--glass-border); background: var(--glass); color: var(--white); border-radius: 4px; font-family: 'Jost', sans-serif; font-size: 0.82rem; cursor: pointer; transition: background 0.2s; margin-bottom: 20px; }
    .btn-google:hover { background: rgba(255,255,255,0.1); }
    .divider { display: flex; align-items: center; gap: 12px; margin-bottom: 20px; color: rgba(245,245,240,0.25); font-size: 0.72rem; letter-spacing: 0.1em; }
    .divider::before, .divider::after { content: ''; flex: 1; height: 1px; background: var(--glass-border); }
    .method-toggle { display: flex; border: 1px solid var(--glass-border); border-radius: 4px; overflow: hidden; margin-bottom: 20px; }
    .method-btn { flex: 1; padding: 10px; background: transparent; border: none; color: rgba(245,245,240,0.45); font-family: 'Jost', sans-serif; font-size: 0.78rem; letter-spacing: 0.06em; cursor: pointer; transition: all 0.2s; text-transform: uppercase; }
    .method-btn.active { background: var(--red); color: var(--white); }
    .country-row { display: flex; gap: 10px; }
    .country-select { width: 150px; flex-shrink: 0; background: var(--input-bg); border: 1px solid var(--glass-border); color: var(--white); padding: 12px 10px; border-radius: 4px; font-family: 'Jost', sans-serif; font-size: 0.82rem; cursor: pointer; appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='7'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%23888' stroke-width='1.5' fill='none' stroke-linecap='round'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 10px center; padding-right: 28px; }
    .country-select:focus { outline: none; border-color: var(--red); }
    .country-select option { background: #1a1a1a; }
    .field { margin-bottom: 14px; }
    .field label { display: block; font-size: 0.7rem; letter-spacing: 0.1em; text-transform: uppercase; color: rgba(245,245,240,0.45); margin-bottom: 6px; }
    .field input { width: 100%; padding: 12px 14px; background: var(--input-bg); border: 1px solid var(--glass-border); color: var(--white); border-radius: 4px; font-family: 'Jost', sans-serif; font-size: 0.9rem; transition: border-color 0.2s; }
    .field input:focus { outline: none; border-color: var(--red); }
    .field input::placeholder { color: rgba(245,245,240,0.2); }
    .terms-row { display: flex; align-items: flex-start; gap: 10px; margin-bottom: 20px; font-size: 0.75rem; color: rgba(245,245,240,0.45); line-height: 1.5; }
    .terms-row input[type="checkbox"] { width: 15px; height: 15px; margin-top: 2px; accent-color: var(--red); cursor: pointer; flex-shrink: 0; }
    .terms-row a { color: var(--red-light); text-decoration: none; }
    .btn-submit { width: 100%; padding: 13px; background: var(--red); color: var(--white); border: none; border-radius: 4px; font-family: 'Jost', sans-serif; font-size: 0.85rem; letter-spacing: 0.1em; text-transform: uppercase; cursor: pointer; transition: background 0.2s; margin-bottom: 18px; }
    .btn-submit:hover { background: var(--red-light); }
    .btn-submit:disabled { background: rgba(192,57,43,0.4); cursor: not-allowed; }
    .signin-link { text-align: center; font-size: 0.78rem; color: rgba(245,245,240,0.4); }
    .signin-link a { color: var(--red-light); text-decoration: none; }
    .error-msg { color: var(--red-light); font-size: 0.78rem; margin-bottom: 14px; display: none; }
    .success-msg { color: #2ecc71; font-size: 0.78rem; margin-bottom: 14px; display: none; }
  </style>
</head>
<body>
<div class="page-wrap">
  <div class="left-panel">
    <div class="left-panel-content">
      <blockquote>"Food is the thread that weaves the world's cultures together."</blockquote>
      <cite>‚Äî Global Epicure</cite>
    </div>
  </div>
  <div class="right-panel">
    <a href="index.html" class="back-link">‚Üê Back to Home</a>
    <div class="brand">
      <svg width="32" height="32" viewBox="0 0 42 42" fill="none">
        <circle cx="21" cy="21" r="19" stroke="#C0392B" stroke-width="1.5"/>
        <line x1="15" y1="11" x2="15" y2="31" stroke="white" stroke-width="1.3" stroke-linecap="round"/>
        <line x1="13" y1="11" x2="13" y2="17" stroke="white" stroke-width="1.3" stroke-linecap="round"/>
        <line x1="17" y1="11" x2="17" y2="17" stroke="white" stroke-width="1.3" stroke-linecap="round"/>
        <path d="M13 17 Q15 19 17 17" stroke="white" stroke-width="1.3" fill="none"/>
        <path d="M21 11 Q29 16 29 21 Q29 26 21 31" stroke="#C0392B" stroke-width="1.4" fill="none" stroke-linecap="round"/>
        <polygon points="24,18 24.6,20 26.5,20 25,21.2 25.6,23.2 24,22 22.4,23.2 23,21.2 21.5,20 23.4,20" fill="#C0392B"/>
      </svg>
      <div><div class="brand-name">Global Epicure</div><div class="brand-tag">Rate & Discover the World's Best Dishes</div></div>
    </div>
    <h2>Create Account</h2>
    <p class="subtitle">Join thousands of food lovers worldwide.</p>
    <button class="btn-google" onclick="signUpWithGoogle()">
      <svg width="18" height="18" viewBox="0 0 24 24"><path fill="#4285F4" d="M23.7 12.27c0-.79-.07-1.54-.19-2.27H12v4.51h6.58a5.62 5.62 0 01-2.44 3.68v3.06h3.95c2.31-2.13 3.64-5.27 3.64-9.04z"/><path fill="#34A853" d="M12 24c3.31 0 6.08-1.1 8.1-2.97l-3.95-3.06a7.45 7.45 0 01-4.15 1.17 7.42 7.42 0 01-6.98-5.13H.95v3.16A12 12 0 0012 24z"/><path fill="#FBBC05" d="M5.02 14.01A7.35 7.35 0 014.62 12c0-.7.12-1.37.4-2.01V6.83H.95A12 12 0 000 12c0 1.93.46 3.76 1.27 5.38l3.75-3.37z"/><path fill="#EA4335" d="M12 4.75a6.5 6.5 0 014.6 1.8l3.43-3.43A11.52 11.52 0 0012 0 12 12 0 00.95 6.83L4.7 9.99A7.41 7.41 0 0112 4.75z"/></svg>
      Continue with Google
    </button>
    <div class="divider">or sign up with</div>
    <div class="method-toggle">
      <button class="method-btn active" id="emailBtn" onclick="switchMethod('email')">üìß Email</button>
      <button class="method-btn" id="phoneBtn" onclick="switchMethod('phone')">üì± Phone</button>
    </div>
    <div class="error-msg" id="errorMsg"></div>
    <div class="success-msg" id="successMsg"></div>
    <div class="field"><label>Full Name</label><input type="text" id="nameInput" placeholder="Your full name"/></div>
    <div id="emailFields">
      <div class="field"><label>Email Address</label><input type="email" id="emailInput" placeholder="you@example.com"/></div>
    </div>
    <div id="phoneFields" style="display:none;">
      <div class="field">
        <label>Phone Number</label>
        <div class="country-row">
          <select class="country-select" id="countrySelect">
            <option value="+254">üá∞üá™ Kenya (+254)</option>
            <option value="+1">üá∫üá∏ USA (+1)</option>
            <option value="+44">üá¨üáß UK (+44)</option>
            <option value="+234">üá≥üá¨ Nigeria (+234)</option>
            <option value="+27">üáøüá¶ S. Africa (+27)</option>
            <option value="+233">üá¨üá≠ Ghana (+233)</option>
            <option value="+255">üáπüáø Tanzania (+255)</option>
            <option value="+256">üá∫üá¨ Uganda (+256)</option>
            <option value="+251">üá™üáπ Ethiopia (+251)</option>
            <option value="+212">üá≤üá¶ Morocco (+212)</option>
            <option value="+20">üá™üá¨ Egypt (+20)</option>
            <option value="+91">üáÆüá≥ India (+91)</option>
          </select>
          <input type="tel" id="phoneInput" placeholder="712 345 678" style="flex:1"/>
        </div>
      </div>
    </div>
    <div class="field"><label>Password</label><input type="password" id="passwordInput" placeholder="Min 8 characters"/></div>
    <div class="terms-row">
      <input type="checkbox" id="termsCheck"/>
      <span>I agree to the <a href="#">Terms & Conditions</a> and <a href="#">Privacy Policy</a>.</span>
    </div>
    <button class="btn-submit" id="submitBtn" onclick="handleSignUp()">Continue ‚Üí</button>
    <div class="signin-link">Already have an account? <a href="signin.html">Sign In</a></div>
  </div>
</div>
<script>
  const SUPABASE_URL  = 'https://YOUR_PROJECT_ID.supabase.co';
  const SUPABASE_ANON = 'YOUR_ANON_PUBLIC_KEY';
  const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON);
  let currentMethod = 'email';
  function switchMethod(m){
  currentMethod = m;
  if(m === 'email'){
    document.getElementById('emailFields').style.display = 'block';
    document.getElementById('phoneFields').style.display = 'none';
    document.getElementById('emailBtn').classList.add('active');
    document.getElementById('phoneBtn').classList.remove('active');
  } else {
    document.getElementById('emailFields').style.display = 'none';
    document.getElementById('phoneFields').style.display = 'block';
    document.getElementById('emailBtn').classList.remove('active');
    document.getElementById('phoneBtn').classList.add('active');
  }
}
  function showError(msg){const e=document.getElementById('errorMsg');e.textContent=msg;e.style.display='block';document.getElementById('successMsg').style.display='none';}
  function showSuccess(msg){const e=document.getElementById('successMsg');e.textContent=msg;e.style.display='block';document.getElementById('errorMsg').style.display='none';}
  function clearMessages(){document.getElementById('errorMsg').style.display='none';document.getElementById('successMsg').style.display='none';}
  async function signUpWithGoogle(){clearMessages();const{error}=await supabase.auth.signInWithOAuth({provider:'google',options:{redirectTo:window.location.origin+'/home.html'}});if(error)showError(error.message);}
  async function handleSignUp(){
    clearMessages();
    const name=document.getElementById('nameInput').value.trim();
    const password=document.getElementById('passwordInput').value;
    const agreed=document.getElementById('termsCheck').checked;
    if(!name){showError('Please enter your full name.');return;}
    if(!agreed){showError('You must agree to the Terms & Conditions.');return;}
    if(password.length<8){showError('Password must be at least 8 characters.');return;}
    const btn=document.getElementById('submitBtn');btn.disabled=true;btn.textContent='Creating account‚Ä¶';
    try{
      if(currentMethod==='email'){
        const email=document.getElementById('emailInput').value.trim();
        if(!email){showError('Please enter your email.');btn.disabled=false;btn.textContent='Continue ‚Üí';return;}
        const{error}=await supabase.auth.signUp({email,password,options:{data:{full_name:name}}});
        if(error)throw error;
        showSuccess('Account created! Check your email to confirm, then sign in.');
        setTimeout(()=>window.location.href='home.html',2200);
      }else{
        const code=document.getElementById('countrySelect').value;
        const local=document.getElementById('phoneInput').value.trim().replace(/^0/,'');
        if(!local){showError('Please enter your phone number.');btn.disabled=false;btn.textContent='Continue ‚Üí';return;}
        const{error}=await supabase.auth.signInWithOtp({phone:code+local});
        if(error)throw error;
        showSuccess('OTP sent! Enter it below.');
        showOTPField(name,code+local);
      }
    }catch(e){showError(e.message||'Sign up failed.');btn.disabled=false;btn.textContent='Continue ‚Üí';}
  }
  function showOTPField(name,phone){
    const btn=document.getElementById('submitBtn');btn.textContent='Continue ‚Üí';btn.disabled=false;
    if(document.getElementById('otpField'))return;
    const div=document.createElement('div');div.className='field';div.id='otpField';
    div.innerHTML='<label>OTP Code</label><input type="text" id="otpInput" placeholder="Enter 6-digit OTP" maxlength="6"/>';
    btn.parentNode.insertBefore(div,btn);btn.onclick=()=>verifyOTP(name,phone);
  }
  async function verifyOTP(name,phone){
    clearMessages();
    const token=(document.getElementById('otpInput')?.value||'').trim();
    if(!token){showError('Please enter the OTP code.');return;}
    const{error}=await supabase.auth.verifyOtp({phone,token,type:'sms'});
    if(error){showError(error.message);return;}
    window.location.href='home.html';
  }
</script>
</body>
</html>
